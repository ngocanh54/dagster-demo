# User Analytics Data Mart
# This mart aggregates user and post data for analytics dashboards
#
# This pipeline:
# 1. Fetches user and post data from API
# 2. Creates aggregated user metrics
# 3. Creates user activity summary

assets:
  # Source: User data
  mart_users:
    type: api_fetch
    url: https://jsonplaceholder.typicode.com/users
    description: User dimension table for analytics

  # Source: Posts data
  mart_posts:
    type: api_fetch
    url: https://jsonplaceholder.typicode.com/posts
    description: Posts fact table for analytics

  # Aggregate: User metrics
  user_metrics:
    type: transform
    description: Aggregated user metrics (post count, avg length, etc.)
    depends_on:
      - mart_users
      - mart_posts

  # Mart: User activity summary
  user_activity_summary:
    type: transform
    description: Final user activity summary mart for dashboards
    depends_on:
      - user_metrics
